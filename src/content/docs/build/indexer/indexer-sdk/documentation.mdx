---
title: "Documentation"
---

## Architecture of the Indexer SDK

In the Aptos indexing stack, a processor indexes a specific subset of data from the blockchain and writes the data into an external database.

Each processor follows this general flow:

1. Receive a stream of transactions from [Transaction Stream](/build/indexer/txn-stream)
2. Extract the relevant data from the transactions and transform it into a standardized schema
3. Store the transformed data into a database
4. Keep track of the transaction versions that have been processed

The Indexer SDK allows you to write a processor as a directed graph of independent steps.
Each `Step` has an input and output, and the output of each `Step` is connected to the input of the next `Step` by a [Kanal channel](https://github.com/fereidani/kanal).

<center>
  {/* <ThemedImage alt="Indexer SDK Custom Processor Architecture" sources={"type":"mdxJsxAttributeValueExpression","value":"{\n    light: '/docs/indexer-custom-processor-light.svg',\n    dark: '/docs/indexer-custom-processor-dark.svg',\n  }","data":{"estree":{"type":"Program","start":961,"end":1080,"body":[{"type":"ExpressionStatement","expression":{"type":"ObjectExpression","start":961,"end":1080,"loc":{"start":{"line":25,"column":13,"offset":961},"end":{"line":28,"column":5,"offset":1080}},"properties":[{"type":"Property","start":969,"end":1018,"loc":{"start":{"line":26,"column":6,"offset":969},"end":{"line":26,"column":55,"offset":1018}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":969,"end":974,"loc":{"start":{"line":26,"column":6,"offset":969},"end":{"line":26,"column":11,"offset":974}},"name":"light","range":[969,974]},"value":{"type":"Literal","start":976,"end":1018,"loc":{"start":{"line":26,"column":13,"offset":976},"end":{"line":26,"column":55,"offset":1018}},"value":"/docs/indexer-custom-processor-light.svg","raw":"'/docs/indexer-custom-processor-light.svg'","range":[976,1018]},"kind":"init","range":[969,1018]},{"type":"Property","start":1026,"end":1073,"loc":{"start":{"line":27,"column":6,"offset":1026},"end":{"line":27,"column":53,"offset":1073}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1026,"end":1030,"loc":{"start":{"line":27,"column":6,"offset":1026},"end":{"line":27,"column":10,"offset":1030}},"name":"dark","range":[1026,1030]},"value":{"type":"Literal","start":1032,"end":1073,"loc":{"start":{"line":27,"column":12,"offset":1032},"end":{"line":27,"column":53,"offset":1073}},"value":"/docs/indexer-custom-processor-dark.svg","raw":"'/docs/indexer-custom-processor-dark.svg'","range":[1032,1073]},"kind":"init","range":[1026,1073]}],"range":[961,1080]},"start":961,"end":1080,"loc":{"start":{"line":25,"column":13,"offset":961},"end":{"line":28,"column":5,"offset":1080}},"range":[961,1080]}],"sourceType":"module","comments":[],"loc":{"start":{"line":25,"column":13,"offset":961},"end":{"line":28,"column":5,"offset":1080}},"range":[961,1080]}}} /> */}
</center>

## When to use the Indexer SDK

The Indexer SDK is useful when you want to index a custom contract or you realize you need a new kind of data that isn't available in the [Indexer API](/build/indexer/indexer-api).

The general flow to write a custom processor with the Indexer SDK is:

1. Define your database schema
2. Create a new processor
3. Create `Step`s that extract and transform data into your storage schema
4. Customize your processor by adding and connecting steps
5. Run your processor and see the data indexed into your database

## Benefits of the Indexer SDK

The Indexer SDK's architecture simplifies writing custom processors in several ways:

1. You can reuse `Step` implementations across processors which reduces duplication of common data extraction logic.
2. The SDK collects basic performance metrics, like the number of transactions processed, for each `Step`, which enables observability into subcomponents of the processor.
3. Since each `Step` is independent, you can safely customize parts of the processor without breaking the other pieces.
   For example, you can add additional `Step`'s to pre/post-process data or batch data writes. Each `Step` can also be tested in isolation from the rest of the processor.
