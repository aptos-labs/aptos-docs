---
title: "Gas- und Speichergeb√ºhren"
---

import { Aside } from '@astrojs/starlight/components';

Jede Transaktionsausf√ºhrung auf der Aptos-Blockchain erfordert eine Bearbeitungsgeb√ºhr. Diese Geb√ºhr umfasst derzeit zwei Komponenten:

1. Ausf√ºhrungs- und E/A-Kosten

- Dies deckt Ihre Nutzung vor√ºbergehender Rechenressourcen ab, wie die Verarbeitung Ihrer Transaktionen und die Verbreitung des validierten Datensatzes im verteilten Netzwerk des Mainnets.
- Es wird in Gas-Einheiten gemessen, deren Preis je nach Netzwerklast schwanken kann. Dies erm√∂glicht es, dass Ausf√ºhrungs- und E/A-Kosten niedrig sind, wenn das Netzwerk weniger ausgelastet ist.
- Dieser Teil des Gases wird bei der Ausf√ºhrung einer Transaktion dauerhaft verbrannt.

2. Speichergeb√ºhren

- Dies deckt die Kosten f√ºr die dauerhafte Speicherung des validierten Datensatzes im verteilten Blockchain-Speicher ab.
- Es wird in festen APT-Preisen gemessen, sodass die dauerhafte Speicherkosten stabil bleiben, auch wenn der Gas-Einheitspreis mit der vor√ºbergehenden Last des Netzwerks schwankt.
- Die Speichergeb√ºhr kann zur√ºckerstattet werden, wenn der zugewiesene Speicherplatz gel√∂scht wird. Derzeit ist das Netzwerk so konfiguriert, dass es die gesamte Speichergeb√ºhr zur√ºckerstattet, die √ºber die Lebensdauer eines Zustandsspeicherplatzes gezahlt wurde.
- Um die Systemimplementierung einfach zu halten, wird dieser Teil des Gases verbrannt und bei der R√ºckerstattung wieder gepr√§gt.

<Aside type="note">
  Konzeptionell kann diese Geb√ºhr als ziemlich √§hnlich betrachtet werden wie wir f√ºr unsere Strom- oder Wasserversorgung zu Hause bezahlen.
</Aside>

## Gaseinheit

Transaktionen k√∂nnen je nach ihrem Zweck von einfach und kosteng√ºnstig bis komplex reichen. In der Aptos-Blockchain repr√§sentiert eine **Gaseinheit** eine Grundeinheit des Verbrauchs f√ºr vor√ºbergehende Ressourcen, wie das Durchf√ºhren von Berechnungen oder den Zugriff auf Speicher. Letzteres sollte nicht mit dem langfristigen Speicheraspekt solcher Operationen verwechselt werden, da dies separat durch die Speichergeb√ºhren abgedeckt wird.

Siehe [Wie Base Gas funktioniert](/de/network/blockchain/base-gas) f√ºr eine detaillierte Beschreibung der Gasgeb√ºhrentypen und verf√ºgbaren Optimierungen.

<Aside type="note">
  üëâ Eine **Gaseinheit** ist eine dimensionslose Zahl oder eine Einheit, die nicht mit einem bestimmten Element wie einer M√ºnze verbunden ist, ausgedr√ºckt als ganze Zahl. Die gesamten von Ihrer Transaktion verbrauchten Gaseinheiten h√§ngen von der Komplexit√§t Ihrer Transaktion ab. Der **Gaspreis** andererseits wird in Bezug auf die native M√ºnze der Aptos-Blockchain [APT](/de/network/glossary#apt) und ihre Untereinheit [Octas](/de/network/glossary#octa) ausgedr√ºckt. Siehe auch [Transaktionen und Zust√§nde](/de/network/blockchain/txns-states) daf√ºr, wie eine an die Aptos-Blockchain √ºbermittelte Transaktion aussieht.
</Aside>

## Die Geb√ºhrenaufstellung

Ab der Aptos Framework-Version 1.7 wird die Aufschl√ºsselung von Geb√ºhrenbelastungen und -erstattungen als Modulereignis ausgegeben, das durch die Struktur `0x1::transaction_fee::FeeStatement` dargestellt wird.

```move filename="transaction_fee.move"
#[event]
/// Aufschl√ºsselung der Geb√ºhrenbelastung und -erstattung f√ºr eine Transaktion.
/// Die Struktur ist:
///
/// - Nettobelastung oder -erstattung (nicht in der Aufstellung)
///    - Gesamtbelastung: total_charge_gas_units, entspricht `gas_used` in der on-chain `TransactionInfo`.
///      Dies ist die Summe der nachstehenden Unterelemente. Beachten Sie, dass es bei der
///      Umrechnung zwischen internen und externen Gaseinheiten und zwischen nativen Token und Gas-
///      einheiten zu Pr√§zisionsverlusten kommen kann, sodass es m√∂glich ist, dass die Zahlen nicht genau aufgehen. -- Diese Zahl ist die endg√ºltige
///      Belastung, w√§hrend die Aufschl√ºsselung lediglich informativer Natur ist.
///      - Ausf√ºhrung: execution_gas_units
///      - E/A: io_gas_units
///      - Speicher: storage_fee_octas, umgerechnet in Gaseinheiten entsprechend dem Kurs
///    - Gesamterstattung: total_refund_gas_units
///      - Erstattete Speichergeb√ºhren: storage_fee_refund_octas, umgerechnet in Gaseinheiten entsprechend dem Kurs
///
/// Der anwendbare Gaseinheitspreis ist in den Transaktionsinformationen zu finden.
struct FeeStatement has copy, drop, store {
    /// Gesamte belastete Gaseinheiten.
    total_charge_gas_units: u64,
    /// Belastete Ausf√ºhrungs-Gaseinheiten.
    execution_gas_units: u64,
    /// Belastete E/A-Gaseinheiten.
    io_gas_units: u64,
    /// Belastete Speichergeb√ºhren in Octas.
    storage_fee_octas: u64,
    /// Gesamte erstattete Gaseinheiten.
    total_refund_gas_units: u64,
    /// Erstattete Speichergeb√ºhren in Octas.
    storage_fee_refund_octas: u64,
}
```

### Beispiele f√ºr Geb√ºhrenaufstellungen

#### Einfache √úbertragungstransaktion

F√ºr eine einfache √úbertragungstransaktion k√∂nnten Sie so etwas sehen:

```json
{
  "total_charge_gas_units": "150",
  "execution_gas_units": "120", 
  "io_gas_units": "30",
  "storage_fee_octas": "0",
  "total_refund_gas_units": "0",
  "storage_fee_refund_octas": "0"
}
```

#### Transaktion, die neue Daten erstellt

Wenn eine Transaktion neue Ressourcen on-chain erstellt:

```json
{
  "total_charge_gas_units": "350",
  "execution_gas_units": "200",
  "io_gas_units": "50", 
  "storage_fee_octas": "1000",
  "total_refund_gas_units": "0",
  "storage_fee_refund_octas": "0"
}
```

#### Transaktion, die Daten l√∂scht

Wenn eine Transaktion Ressourcen l√∂scht und eine Erstattung erh√§lt:

```json
{
  "total_charge_gas_units": "180",
  "execution_gas_units": "150",
  "io_gas_units": "30",
  "storage_fee_octas": "0", 
  "total_refund_gas_units": "100",
  "storage_fee_refund_octas": "800"
}
```

## Gaspreise und Sch√§tzung

Der Gaspreis auf Aptos ist dynamisch und wird je nach Netzwerknachfrage angepasst. Das Netzwerk zielt auf einen optimalen Transaktionsdurchsatz ab und passt die Preise an, um stabile Leistung zu gew√§hrleisten.

### Sch√§tzung der Transaktionsgeb√ºhren

Sie k√∂nnen die Geb√ºhren f√ºr Ihre Transaktion mit folgenden Methoden sch√§tzen:

1. **Transaktionssimulation** - F√ºhren Sie Ihre Transaktion im Simulationsmodus aus, um die Gaskosten zu sehen
2. **Aktueller Gaspreis** - Fragen Sie den aktuellen Gaspreis des Netzwerks √ºber die REST-API ab
3. **Historische Geb√ºhren** - Untersuchen Sie √§hnliche Transaktionen, um Kosten zu sch√§tzen

### Optimierung der Gaskosten

- **Vereinfachen Sie die Logik** - Einfachere Operationen kosten weniger Gas
- **Batch-Transaktionen** - Kombinieren Sie mehrere Operationen wenn m√∂glich
- **Ressourcen wiederverwenden** - Vermeiden Sie die Erstellung redundanter Ressourcen
- **Timing √ºberwachen** - Reichen Sie Transaktionen w√§hrend Zeiten geringer Nachfrage ein

<Aside type="tip">
  Verwenden Sie immer die Transaktionssimulation vor der Einreichung, um genaue Gassch√§tzungen zu erhalten und kostspielige Fehler zu vermeiden.
</Aside>
