---
title: "Transacciones Patrocinadas (Pagador de Tarifas)"
description: "Implementa transacciones patrocinadas con Kaptos donde una cuenta paga las tarifas de gas para las transacciones de otra cuenta"
sidebar:
  label: "Transacciones Patrocinadas"
---

import { Aside } from '@astrojs/starlight/components';

El SDK de Kotlin proporciona soporte para transacciones patrocinadas también conocidas como
transacciones de pagador de tarifas.

El flujo estándar para enviar una transacción patrocinada es el siguiente:

1. Determinar sobre **operación** creando una **Transacción**
2. El **remitente firma** la transacción
3. El **pagador de tarifas** firma la transacción
4. **Enviar** la transacción

## Determinar Sobre Operación

Como ya hemos visto en la sección anterior, puedes construir una transacción por ti mismo
usando el método `buildTransaction.simple` o usar los constructores de transacciones pre-construidos
como `transferCoinTransaction`. Sin embargo, en el caso de transacciones patrocinadas, necesitas
especificar el parámetro opcional `withFeePayer` como `true` en todos los casos.

```kotlin
val txn = aptos.buildTransaction.simple(
      sender = alice.accountAddress,
      data =
        entryFunctionData {
          function = "0x1::coin::transfer"
          typeArguments = typeArguments { +TypeTagStruct("0x1::aptos_coin::AptosCoin") }
          functionArguments = functionArguments {
            +bob.accountAddress
            +U64(SEND_AMOUNT_UNITS.toULong())
          }
        },
      withFeePayer = true,
    )
```

O

```kotlin
val txn = aptos.transferCoinTransaction(
      sender = alice,
      receiver = bob.accountAddress,
      amount = SEND_AMOUNT_UNITS,
      withFeePayer = true,
    )
```

## Firmar la Transacción

Una vez que hayas construido una transacción, tú (el remitente) puedes firmarla usando el método `sign`.

```kotlin
val aliceAuthenticator = aptos.sign(
    sender = alice,
    transaction = txn,
)
```

## Firmar la Transacción como Pagador de Tarifas

Para firmar la transacción como pagador de tarifas, puedes usar el método `signAsFeePayer`.

```kotlin
val signerAuthenticator = aptos.signAsFeePayer(
    feePayer = sponsor,
    transaction = txn,
)
```

## Enviar la Transacción

Finalmente, puedes enviar la transacción a la red usando el método `submit`.

```kotlin
val committedTxn = aptos.submitTransaction.simple(
      transaction = txn,
      senderAuthenticator = aliceAuthenticator,
      feePayerAuthenticator = signerAuthenticator,
    )
```

<Aside type="note" emoji="ℹ️">
  Puedes colapsar los pasos de firmado del pagador de tarifas y envío en uno usando el método `signAndSubmitAsFeePayer`.

  ```kotlin
    val committedTxn = aptos.signAndSubmitAsFeePayer(sponsor, aliceAuthenticator, txn)
  ```
</Aside>
