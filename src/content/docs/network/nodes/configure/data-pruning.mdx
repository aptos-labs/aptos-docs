---
title: "Data Pruning"
---

import { Aside } from '@astrojs/starlight/components';

All Aptos nodes (e.g., validators, VFNs and PFNs) process transactions and commit new data to the blockchain.
As the blockchain grows (indefinitely), nodes can manage the amount of storage disk space required by pruning old
blockchain data. To achieve this, Aptos nodes prune the blockchain **ledger history** in their database, which
contains the history of all transactions. The ledger history may be **complete** (e.g., if you're operating an archival
node), or **pruned** to a certain window of transactions (to reduce storage requirements).

By default, ledger pruning is enabled on all nodes, and the pruning window can be configured. This document
describes how you can configure the behavior of the ledger pruner.

<Aside type="tip">
  **Default pruning window**<br />
  The default configuration of the ledger pruner is to keep only the most recent 150 million transactions.
  Almost all Aptos nodes in Mainnet and Testnet use the default configuration. If you wish to run an archival
  node, follow the instructions [here](/network/nodes/configure/state-sync#archival-pfns).
</Aside>

## Disable the ledger pruner

If you wish to disable the ledger pruner entirely, you can do so by adding the following to your node
configuration file.

```yaml filename="fullnode.yaml"
storage:
  storage_pruner_config:
    ledger_pruner_config:
      enable: false
```

<Aside type="danger">
  **Unbounded storage growth**<br />
  Be warned that disabling the ledger pruner will result in unbounded storage growth. This can
  lead to the storage disk filling up very quickly. Disabling the ledger pruner is not recommended.
</Aside>

## Configure the ledger pruner

You can configure the size of the ledger pruning window (i.e., the number of most recent transactions
to retain in storage). To do this, add the following to your node configuration file.

```yaml filename="fullnode.yaml"
storage:
  storage_pruner_config:
    ledger_pruner_config:
      prune_window: 100000000 # 100 million transactions
```

<Aside type="caution">
  **Minimum pruning window**<br />
  Setting the pruning window smaller than 100 million transactions can lead to runtime errors and damage the
  health of the node.
</Aside>
